# Flutter Web è‡ªå‹•åŒ–æ¸¬è©¦è…³æœ¬

é€™æ˜¯ä¸€å€‹å°ˆç‚º Flutter Web ç¶²ç«™è¨­è¨ˆçš„ Playwright è‡ªå‹•åŒ–æ¸¬è©¦è…³æœ¬ï¼Œèƒ½å¤ è‡ªå‹•æ¢ç´¢ç¶²é ä¸¦åŸ·è¡Œéš¨æ©Ÿäº’å‹•æ“ä½œã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹è‰²

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
- âœ… **å¢å¼·å…ƒç´ æª¢æ¸¬**ï¼šæ”¯æ´ Flutter Web ç‰¹å®šé¸æ“‡å™¨å’Œèªç¾©åŒ–å…ƒç´ 
- âœ… **å°ˆé–€æ¸¬è©¦å ´æ™¯**ï¼šç™»å…¥ã€æœç´¢ã€å•†å“ç€è¦½ç­‰æ¥­å‹™å ´æ™¯è‡ªå‹•åŒ–æ¸¬è©¦
- âœ… **å¤šç¨®æ“ä½œé¡å‹**ï¼šæŒ‰éˆ•é»æ“Šã€é€£çµå°èˆªã€æ–‡å­—è¼¸å…¥ã€æ ¸å–æ–¹å¡Šã€ä¸‹æ‹‰é¸å–®ã€æ»‘å‹•å…ƒä»¶ã€æ»¾å‹•æ“ä½œ
- âœ… **è‡ªå‹•æˆªåœ–**ï¼šæ¯æ¬¡æ“ä½œå¾Œè‡ªå‹•æˆªåœ–ï¼Œä¾¿æ–¼å•é¡Œè¿½è¹¤å’Œçµæœåˆ†æ
- âœ… **æ™ºèƒ½ç­‰å¾…**ï¼šé‡å° Flutter Web æ‡‰ç”¨çš„è¼‰å…¥ç‰¹æ€§å„ªåŒ–ç­‰å¾…é‚è¼¯
- âœ… **å½ˆçª—è™•ç†**ï¼šè‡ªå‹•è™•ç† JavaScript å°è©±æ¡†å’Œæ¨¡æ…‹è¦–çª—

### ğŸ“Š æ€§èƒ½ç›£æ§
- âœ… **é é¢è¼‰å…¥æ™‚é–“**ï¼šè©³ç´°çš„å°èˆªæ€§èƒ½æ•¸æ“šæ”¶é›†
- âœ… **æ“ä½œåŸ·è¡Œæ™‚é–“**ï¼šæ¯å€‹æ“ä½œçš„åŸ·è¡Œæ™‚é–“æ¸¬é‡
- âœ… **è¨˜æ†¶é«”ç›£æ§**ï¼šJavaScript å †è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³è¿½è¹¤
- âœ… **ç¶²è·¯è«‹æ±‚ç›£æ§**ï¼šHTTP è«‹æ±‚å’ŒéŸ¿æ‡‰ç›£æ§
- âœ… **éŒ¯èª¤æ”¶é›†**ï¼šæ§åˆ¶å°éŒ¯èª¤å’Œé é¢éŒ¯èª¤è‡ªå‹•æ”¶é›†

### ğŸ“‹ æ¸¬è©¦å ±å‘Š
- âœ… **HTML å ±å‘Š**ï¼šç¾è§€çš„å¯è¦–åŒ–æ¸¬è©¦å ±å‘Š
- âœ… **JSON æ•¸æ“š**ï¼šè©³ç´°çš„æ¸¬è©¦æ•¸æ“š JSON æ ¼å¼
- âœ… **çµ±è¨ˆåˆ†æ**ï¼šæ“ä½œæˆåŠŸç‡ã€å¹³å‡åŸ·è¡Œæ™‚é–“ç­‰çµ±è¨ˆ
- âœ… **éŒ¯èª¤åˆ†æ**ï¼šéŒ¯èª¤é¡å‹å’Œé »ç‡åˆ†æ

## ğŸ› ï¸ ç³»çµ±éœ€æ±‚

- **Node.js**: >= 16.0.0
- **ä½œæ¥­ç³»çµ±**: Windows, macOS, Linux
- **ç€è¦½å™¨**: è‡ªå‹•å®‰è£ Chromium (ä¹Ÿæ”¯æ´ Firefox, Safari)

## ğŸ“¦ å®‰è£æ­¥é©Ÿ

### 1. å…‹éš†æˆ–ä¸‹è¼‰å°ˆæ¡ˆ

```bash
git clone <repository-url>
cd flutter-web-automation
```

### 2. å®‰è£ä¾è³´

```bash
# å®‰è£ Node.js ä¾è³´
npm install

# å®‰è£ Playwright ç€è¦½å™¨
npm run install-browsers
```

### 3. å¿«é€Ÿè¨­ç½® (ä¸€éµå®‰è£)

```bash
npm run setup
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨ (æ¨è–¦)

```bash
# åŸºæœ¬æ¸¬è©¦ (æœ‰ç•Œé¢æ¨¡å¼)
npm test

# ç„¡ç•Œé¢æ¨¡å¼ (æ›´å¿«é€Ÿï¼Œé©åˆ CI/CD)
npm run test:headless

# å¿«é€Ÿæ¸¬è©¦ (åªåŸ·è¡Œ5æ¬¡æ“ä½œ)
npm run test:quick

# æ¸¬è©¦æœ¬åœ°é–‹ç™¼æœå‹™å™¨
npm run test:local
```

### è‡ªå®šç¾©æ¸¬è©¦åƒæ•¸

```bash
# æŒ‡å®šæ¸¬è©¦ç¶²å€
node run-test.js --url=https://your-flutter-app.com

# æŒ‡å®šæ“ä½œæ¬¡æ•¸
node run-test.js --operations=20

# çµ„åˆä½¿ç”¨
node run-test.js --url=https://example.com --operations=15 --headless

# æŸ¥çœ‹æ‰€æœ‰é¸é …
node run-test.js --help
```

### ç›´æ¥åŸ·è¡ŒåŸå§‹è…³æœ¬

```bash
# ä½¿ç”¨åŸå§‹è…³æœ¬
npm run test:original

# æˆ–ç›´æ¥åŸ·è¡Œ
node flutter-web-automation.js
```

## ğŸ“Š æ¸¬è©¦çµæœ

### æ¸¬è©¦å ±å‘Š
æ¸¬è©¦å®Œæˆå¾Œæœƒåœ¨ `screenshots/` ç›®éŒ„ç”Ÿæˆï¼š

```
screenshots/
â”œâ”€â”€ test-report.html      # ğŸ“„ å¯è¦–åŒ–æ¸¬è©¦å ±å‘Š (æ¨è–¦æŸ¥çœ‹)
â”œâ”€â”€ test-report.json      # ğŸ“‹ è©³ç´°æ¸¬è©¦æ•¸æ“š
â”œâ”€â”€ 001_initial_load_*.png
â”œâ”€â”€ 002_click_button_*.png
â””â”€â”€ 003_fill_input_*.png
```

#### HTML å ±å‘Šå…§å®¹
- ğŸ“Š **æ¸¬è©¦æ¦‚æ³**ï¼šç¸½æ“ä½œæ•¸ã€æˆåŠŸç‡ã€åŸ·è¡Œæ™‚é–“
- âš¡ **æ€§èƒ½æ•¸æ“š**ï¼šé é¢è¼‰å…¥æ™‚é–“ã€DOM äº’å‹•æ™‚é–“ã€è¨˜æ†¶é«”ä½¿ç”¨
- ğŸ”§ **æ“ä½œçµ±è¨ˆ**ï¼šå„é¡æ“ä½œçš„æˆåŠŸç‡å’Œå¹³å‡æ™‚é–“
- ğŸŒ **ç¶²è·¯ç›£æ§**ï¼šHTTP è«‹æ±‚å’ŒéŸ¿æ‡‰çµ±è¨ˆ
- âŒ **éŒ¯èª¤å ±å‘Š**ï¼šè©³ç´°çš„éŒ¯èª¤ä¿¡æ¯å’Œç™¼ç”Ÿæ™‚é–“

```bash
# Windows ç”¨æˆ¶å¯ç›´æ¥æ‰“é–‹å ±å‘Š
npm run report
```

### æ§åˆ¶å°è¼¸å‡º
æ¸¬è©¦éç¨‹ä¸­æœƒå³æ™‚è¼¸å‡ºè©³ç´°æ—¥èªŒï¼š
```
ğŸš€ å•Ÿå‹• Chromium ç€è¦½å™¨...
âœ… ç€è¦½å™¨åˆå§‹åŒ–å®Œæˆ
ğŸŒ å°èˆªåˆ° https://redandan.github.io/...
â³ ç­‰å¾… Flutter Web æ‡‰ç”¨è¼‰å…¥...
âœ… Flutter Web æ‡‰ç”¨è¼‰å…¥å®Œæˆ
ğŸ“¸ æˆªåœ–å·²ä¿å­˜: 001_initial_load_2024-01-15T10-30-45-123Z.png
ğŸ” æ‰¾åˆ° 15 å€‹å¯äº’å‹•å…ƒç´ 
ğŸ–±ï¸  é»æ“Š button: ç™»å…¥
ğŸ“¸ æˆªåœ–å·²ä¿å­˜: 002_click_button_2024-01-15T10-30-48-456Z.png
```

## âš™ï¸ é…ç½®é¸é …

### ä¸»è¦é…ç½®åƒæ•¸

åœ¨ `flutter-web-automation.js` ä¸­å¯ä»¥èª¿æ•´ä»¥ä¸‹åƒæ•¸ï¼š

```javascript
class FlutterWebAutomation {
  constructor() {
    // ç›®æ¨™ç¶²ç«™ URL
    this.testUrl = 'https://redandan.github.io/';
    
    // æ¯å€‹é é¢æœ€å¤§æ“ä½œæ¬¡æ•¸
    this.maxOperationsPerPage = 10;
    
    // æˆªåœ–ä¿å­˜ç›®éŒ„
    this.screenshotDir = 'screenshots';
  }
}
```

### ç€è¦½å™¨é…ç½®

```javascript
this.browser = await chromium.launch({
  headless: false,           // æ˜¯å¦ç„¡ç•Œé¢æ¨¡å¼
  args: [
    '--no-sandbox',          // æ²™ç›’æ¨¡å¼
    '--disable-web-security' // Web å®‰å…¨æ€§ (Flutter Web å¯èƒ½éœ€è¦)
  ]
});
```

### è¦–çª—å¤§å°

```javascript
await this.page.setViewportSize({ 
  width: 1920,   // å¯¬åº¦
  height: 1080   // é«˜åº¦
});
```

## ğŸ² æ”¯æ´çš„æ“ä½œé¡å‹

### 1. æŒ‰éˆ•å’Œé€£çµé»æ“Š
- è‡ªå‹•è­˜åˆ¥æ‰€æœ‰å¯è¦‹çš„æŒ‰éˆ•å’Œé€£çµ
- æ’é™¤ JavaScript é€£çµå’Œç¦ç”¨å…ƒç´ 
- æ™ºèƒ½æ»¾å‹•åˆ°å…ƒç´ ä½ç½®

### 2. æ–‡å­—è¼¸å…¥
æ”¯æ´å¤šç¨®è¼¸å…¥æ¡†é¡å‹ï¼Œä¸¦è‡ªå‹•ç”Ÿæˆå°æ‡‰çš„æ¸¬è©¦æ•¸æ“šï¼š

| è¼¸å…¥é¡å‹ | æ¸¬è©¦æ•¸æ“šç¯„ä¾‹ |
|---------|-------------|
| email | test@example.com, user@agoramarket.com |
| password | TestPassword123!, SecurePass456 |
| text | æ¸¬è©¦æ–‡å­—, Automation Test |
| search | å•†å“, æœå‹™, USDT |
| name | æ¸¬è©¦ç”¨æˆ¶, Test User |
| phone | 0912345678, +886912345678 |
| address | å°åŒ—å¸‚ä¿¡ç¾©å€, æ–°åŒ—å¸‚æ¿æ©‹å€ |

### 3. æ ¸å–æ–¹å¡Šæ“ä½œ
- è‡ªå‹•åˆ‡æ›æ ¸å–æ–¹å¡Šç‹€æ…‹
- æ”¯æ´è‡ªå®šç¾©æ¨£å¼çš„æ ¸å–æ–¹å¡Š

### 4. ä¸‹æ‹‰é¸å–®
- éš¨æ©Ÿé¸æ“‡å¯ç”¨é¸é …
- æ”¯æ´ HTML select å…ƒç´ 

## ğŸ›¡ï¸ éŒ¯èª¤è™•ç†

### è‡ªå‹•éŒ¯èª¤æ•æ‰
- **æ§åˆ¶å°éŒ¯èª¤**ï¼šç›£è½ä¸¦è¨˜éŒ„ JavaScript éŒ¯èª¤
- **é é¢éŒ¯èª¤**ï¼šæ•æ‰é é¢è¼‰å…¥å’ŒåŸ·è¡ŒéŒ¯èª¤
- **æ“ä½œå¤±æ•—**ï¼šè¨˜éŒ„å¤±æ•—çš„æ“ä½œä¸¦ç¹¼çºŒåŸ·è¡Œ
- **ç¶²è·¯å•é¡Œ**ï¼šè™•ç†ç¶²è·¯è¶…æ™‚å’Œé€£æ¥å¤±æ•—

### å½ˆçª—è™•ç†
- **JavaScript è­¦å‘Šæ¡†**ï¼šè‡ªå‹•æ¥å—æˆ–é—œé–‰
- **ç¢ºèªå°è©±æ¡†**ï¼šè‡ªå‹•è™•ç†
- **æ¨¡æ…‹è¦–çª—**ï¼šå˜—è©¦å°‹æ‰¾ä¸¦é»æ“Šé—œé–‰æŒ‰éˆ•

### å¤±æ•—é‡è©¦æ©Ÿåˆ¶
- é€£çºŒå¤±æ•— 3 æ¬¡å¾Œåœæ­¢ç•¶å‰é é¢çš„æ¢ç´¢
- æ¯æ¬¡æ“ä½œéƒ½æœ‰ç¨ç«‹çš„éŒ¯èª¤è™•ç†

## ğŸ“± é‡å° Flutter Web çš„å„ªåŒ–

### è¼‰å…¥ç­‰å¾…ç­–ç•¥
```javascript
// ç­‰å¾… Flutter æ¡†æ¶è¼‰å…¥
await this.page.waitForSelector('flt-glass-pane, flutter-view, [flt-renderer]');

// ç¶²è·¯ç©ºé–’ç­‰å¾…
await this.page.goto(url, { waitUntil: 'networkidle' });
```

### ç‰¹æ®Šå…ƒç´ è­˜åˆ¥
- è­˜åˆ¥ Flutter ç‰¹æœ‰çš„ DOM çµæ§‹
- è™•ç† Canvas æ¸²æŸ“çš„å…ƒç´ 
- æ”¯æ´ Flutter çš„è·¯ç”±ç³»çµ±

### æ€§èƒ½å„ªåŒ–
- æ™ºèƒ½ç­‰å¾…æ™‚é–“èª¿æ•´
- æ¸›å°‘ä¸å¿…è¦çš„ DOM æŸ¥è©¢
- å„ªåŒ–æˆªåœ–é »ç‡

## ğŸ”§ é€²éšä½¿ç”¨

### è‡ªå®šç¾©æ¸¬è©¦æ•¸æ“š

ä¿®æ”¹ `generateTestData` æ–¹æ³•ä¾†è‡ªå®šç¾©æ¸¬è©¦æ•¸æ“šï¼š

```javascript
generateTestData(inputType, placeholder = '') {
  const customData = {
    email: ['your-test@email.com'],
    password: ['YourTestPassword123!'],
    // æ·»åŠ æ›´å¤šè‡ªå®šç¾©æ•¸æ“š
  };
  
  // æ‚¨çš„è‡ªå®šç¾©é‚è¼¯
}
```

### æ·»åŠ è‡ªå®šç¾©æ“ä½œ

```javascript
async customOperation() {
  try {
    // æ‚¨çš„è‡ªå®šç¾©æ“ä½œé‚è¼¯
    console.log('ğŸ¯ åŸ·è¡Œè‡ªå®šç¾©æ“ä½œ');
    
    // è¨˜å¾—æˆªåœ–
    await this.takeScreenshot('custom_operation');
    
    return true;
  } catch (error) {
    console.error('âŒ è‡ªå®šç¾©æ“ä½œå¤±æ•—:', error.message);
    return false;
  }
}
```

### ç’°å¢ƒè®Šæ•¸é…ç½®

```bash
# è¨­ç½®ç„¡ç•Œé¢æ¨¡å¼
export HEADLESS=true

# è¨­ç½®è‡ªå®šç¾© URL
export TEST_URL=https://your-app.com

# è¨­ç½®æœ€å¤§æ“ä½œæ¬¡æ•¸
export MAX_OPERATIONS=20
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. ç€è¦½å™¨å•Ÿå‹•å¤±æ•—
```bash
# é‡æ–°å®‰è£ç€è¦½å™¨
npm run install-browsers

# æª¢æŸ¥ç³»çµ±ä¾è³´
sudo apt-get install -y libnss3 libatk-bridge2.0-0 libdrm2 libxkbcommon0 libxcomposite1 libxdamage1 libxrandr2 libgbm1 libxss1 libasound2
```

#### 2. Flutter Web è¼‰å…¥ç·©æ…¢
```javascript
// å¢åŠ ç­‰å¾…æ™‚é–“
await this.page.waitForSelector('flt-glass-pane', { timeout: 30000 });

// æˆ–è€…ç¦ç”¨ç­‰å¾… Flutter å…ƒç´ 
// è¨»è§£æ‰ Flutter ç‰¹å®šçš„ç­‰å¾…é‚è¼¯
```

#### 3. æˆªåœ–å¤±æ•—
```bash
# æª¢æŸ¥ç›®éŒ„æ¬Šé™
chmod 755 screenshots/

# æª¢æŸ¥ç£ç›¤ç©ºé–“
df -h
```

#### 4. è¨˜æ†¶é«”ä¸è¶³
```javascript
// å•Ÿç”¨ç„¡ç•Œé¢æ¨¡å¼
headless: true

// æ¸›å°‘è¦–çª—å¤§å°
await this.page.setViewportSize({ width: 1280, height: 720 });
```

### èª¿è©¦æ¨¡å¼

```javascript
// å•Ÿç”¨è©³ç´°æ—¥èªŒ
await this.page.route('**/*', route => {
  console.log(`ğŸ“¡ è«‹æ±‚: ${route.request().method()} ${route.request().url()}`);
  route.continue();
});

// å•Ÿç”¨è¿½è¹¤
await this.page.tracing.start({ screenshots: true, snapshots: true });
await this.page.tracing.stop({ path: 'trace.zip' });
```

## ğŸ“ˆ æ€§èƒ½ç›£æ§

### æ¸¬è©¦æŒ‡æ¨™
- **æ“ä½œæˆåŠŸç‡**ï¼šæˆåŠŸæ“ä½œæ•¸ / ç¸½æ“ä½œæ•¸
- **å¹³å‡éŸ¿æ‡‰æ™‚é–“**ï¼šæ¯æ¬¡æ“ä½œçš„å¹³å‡ç­‰å¾…æ™‚é–“
- **éŒ¯èª¤ç‡**ï¼šéŒ¯èª¤æ¬¡æ•¸ / ç¸½æ“ä½œæ•¸
- **è¦†è“‹ç‡**ï¼šæ¸¬è©¦è¦†è“‹çš„é é¢å’ŒåŠŸèƒ½æ•¸é‡

### è‡ªå‹•å ±å‘Šç”Ÿæˆ

```javascript
// åœ¨æ¸¬è©¦çµæŸå¾Œç”Ÿæˆå ±å‘Š
const report = {
  totalOperations: this.operationCount,
  successRate: (successCount / this.operationCount * 100).toFixed(2) + '%',
  duration: duration.toFixed(2) + ' ç§’',
  screenshotCount: fs.readdirSync(this.screenshotDir).length
};

fs.writeFileSync('test-report.json', JSON.stringify(report, null, 2));
```

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Request ä¾†æ”¹å–„é€™å€‹å°ˆæ¡ˆï¼

### é–‹ç™¼ç’°å¢ƒè¨­ç½®
```bash
git clone <repository-url>
cd flutter-web-automation
npm install
npm run setup
```

### ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ ESLint é€²è¡Œä»£ç¢¼æª¢æŸ¥
- éµå¾ª JSDoc è¨»é‡‹è¦ç¯„
- æ‰€æœ‰æ–°åŠŸèƒ½éƒ½éœ€è¦æ·»åŠ å°æ‡‰çš„éŒ¯èª¤è™•ç†

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆ

## ğŸ“ æŠ€è¡“æ”¯æ´

- **å•é¡Œå›å ±**ï¼šè«‹ä½¿ç”¨ GitHub Issues
- **åŠŸèƒ½å»ºè­°**ï¼šæ­¡è¿æäº¤ Feature Request
- **æŠ€è¡“è¨è«–**ï¼šå¯åœ¨ Discussions å€åŸŸäº¤æµ

---

**æœ€å¾Œæ›´æ–°æ™‚é–“**: 2024å¹´1æœˆ
**ç‰ˆæœ¬**: 1.0.0
**ç›¸å®¹æ€§**: Node.js 16+, Playwright 1.40+
